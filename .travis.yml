sudo: required
language: java
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
install: ./gradlew :assemble

jobs:
  include:
  - stage: test
    jdk: openjdk8
    script: ./gradlew check :test
  # - stage: test                # Disabled due to SSL errors on Travis
  #   jdk: openjdk7              # when downloading gradle
  #   script: ./gradlew :test
  - stage: test
    jdk: oraclejdk9
    script: ./gradlew check :test
  - stage: test
    jdk: oraclejdk8
    script: ./gradlew check :test
